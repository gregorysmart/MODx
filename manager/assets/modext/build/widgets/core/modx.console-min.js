MODx.Console=function(A){A=A||{};Ext.Updater.defaults.showLoadIndicator=false;Ext.applyIf(A,{title:_("progress"),url:MODx.config.connectors_url+"index.php",baseParams:{action:"console"},modal:true,shadow:true,resizable:false,collapsible:false,closable:false,maximizable:true,autoScroll:true,height:400,width:550,bodyStyle:"background-color: white; padding: .75em; font-family: Courier",items:[{xtype:"panel",id:"console-body",cls:"modx-console"}],buttons:[{text:_("ok"),id:"modx-console-ok",disabled:true,scope:this,handler:function(){this.hide()}}],listeners:{show:{fn:this.init,scope:this}}});MODx.Console.superclass.constructor.call(this,A);this.config=A};Ext.extend(MODx.Console,Ext.Window,{init:function(){Ext.Msg.hide();if(MODx.util.LoadingBox){MODx.util.LoadingBox.disable()}this.mgr=new Ext.Updater("console-body");var A=this.mgr;A.startAutoRefresh(1,this.config.url,this.config.baseParams||{},function(C,B,D,E){D=Ext.decode(D.responseText);if(D.success==true){A.stopAutoRefresh();C.update(D.message);Ext.getCmp("modx-console-ok").setDisabled(false);return false}else{C.update(D.message)}},true)},complete:function(){Ext.getCmp("modx-console-ok").setDisabled(false);this.mgr.stopAutoRefresh()}});Ext.reg("modx-console",MODx.Console);