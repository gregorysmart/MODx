MODx.grid.ManagerLog=function(A){A=A||{};Ext.applyIf(A,{title:_("manager_log"),id:"grid-manager-log",url:MODx.config.connectors_url+"system/log.php",fields:["id","user","occurred","action","classKey","item","menu"],width:800,autosave:true,paging:true,columns:[{header:_("occurred"),dataIndex:"occurred",width:125},{header:_("user"),dataIndex:"user",width:200,editor:{xtype:"combo-user",renderer:true},editable:false},{header:_("action"),dataIndex:"action",width:125}]});MODx.grid.ManagerLog.superclass.constructor.call(this,A)};Ext.extend(MODx.grid.ManagerLog,MODx.grid.Grid);Ext.reg("grid-manager-log",MODx.grid.ManagerLog);MODx.panel.ManagerLog=function(A){A=A||{};Ext.applyIf(A,{title:_("filter"),width:450,items:this.getItems(),buttons:[{text:_("filter_clear"),scope:this,handler:function(){this.getForm().reset();this.filter()}}]});MODx.panel.ManagerLog.superclass.constructor.call(this,A)};Ext.extend(MODx.panel.ManagerLog,MODx.FormPanel,{getItems:function(){var A={change:{fn:this.filter,scope:this},render:{fn:this._addEnterKeyHandler}};return[{xtype:"combo-user",fieldLabel:_("user"),name:"user",listeners:{select:{fn:this.filter,scope:this}}},{xtype:"textfield",fieldLabel:_("action"),name:"action_type",listeners:A},{xtype:"datefield",fieldLabel:_("date_start"),name:"date_start",allowBlank:true,listeners:A},{xtype:"datefield",fieldLabel:_("date_end"),name:"date_end",allowBlank:true,listeners:A}]},filter:function(D,C,A){var B=this.getForm().getValues();B.start=0;B.limit=20;Ext.getCmp("grid-manager-log").getStore().load({params:B,scope:this})},_addEnterKeyHandler:function(){this.getEl().addKeyListener(Ext.EventObject.ENTER,function(){this.fireEvent("change")},this)}});Ext.reg("panel-manager-log",MODx.panel.ManagerLog);