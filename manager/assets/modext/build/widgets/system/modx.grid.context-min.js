MODx.grid.Context=function(A){A=A||{};Ext.applyIf(A,{title:_("contexts"),url:MODx.config.connectors_url+"context/index.php",fields:["key","description","menu"],width:800,paging:true,autosave:true,remoteSort:true,primaryKey:"key",columns:[{header:_("context_key"),dataIndex:"key",width:150,sortable:true},{header:_("description"),dataIndex:"description",width:575,sortable:false,editor:{xtype:"textfield"}}],tbar:[{text:_("create_new"),handler:{xtype:"window-context-create",blankValues:true}}]});MODx.grid.Context.superclass.constructor.call(this,A)};Ext.extend(MODx.grid.Context,MODx.grid.Grid,{update:function(C,B){var A=this.menu.record;location.href="index.php?a="+MODx.action["context/update"]+"&key="+A.key;return false;if(this.windows.update){this.windows.update.destroy()}this.windows.update=MODx.load({xtype:"window-context-update",scope:this,success:this.refresh,record:A,context_key:A.key});this.windows.update.setValues(A);this.windows.update.show(B.target)}});Ext.reg("grid-context",MODx.grid.Context);MODx.window.CreateContext=function(A){A=A||{};Ext.applyIf(A,{title:_("context_create"),url:MODx.config.connectors_url+"context/index.php",action:"create",fields:[{xtype:"textfield",fieldLabel:_("context_key"),name:"key",width:250,maxLength:100},{xtype:"textarea",fieldLabel:_("description"),name:"description",width:300,grow:true}]});MODx.window.CreateContext.superclass.constructor.call(this,A)};Ext.extend(MODx.window.CreateContext,MODx.Window);Ext.reg("window-context-create",MODx.window.CreateContext);