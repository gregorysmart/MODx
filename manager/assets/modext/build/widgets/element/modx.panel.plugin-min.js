MODx.panel.Plugin=function(A){A=A||{};Ext.applyIf(A,{url:MODx.config.connectors_url+"element/plugin.php",baseParams:{},id:"panel-plugin",class_key:"modPlugin",plugin:"",bodyStyle:"",defaults:{collapsible:false,autoHeight:true},items:{xtype:"tabpanel",activeTab:0,deferredRender:false,border:false,defaults:{autoHeight:true,layout:"form",bodyStyle:"padding: 1.5em;",labelWidth:150},items:[{title:_("plugin_title"),defaults:{border:false,msgTarget:"side"},items:[{html:"<h2>"+_("plugin")+": "+A.name+"</h2>",id:"plugin-name"},{html:"<p>"+_("plugin_msg")+"</p>"},{xtype:"hidden",name:"id",value:A.plugin},{xtype:"textfield",fieldLabel:_("plugin_name"),name:"name",width:300,maxLength:255,enableKeyEvents:true,allowBlank:false,listeners:{keyup:{scope:this,fn:function(B,C){Ext.getCmp("plugin-name").getEl().update("<h2>"+_("plugin")+": "+B.getValue()+"</h2>")}}}},{xtype:"textfield",fieldLabel:_("plugin_desc"),name:"description",width:300,maxLength:255},{xtype:"combo-category",fieldLabel:_("category"),name:"category",width:250,value:A.category||null},{xtype:"checkbox",fieldLabel:_("plugin_disabled"),name:"disabled"},{xtype:"checkbox",fieldLabel:_("plugin_lock"),description:_("plugin_lock_msg"),name:"locked"},{html:"<br />"+_("plugin_code")},{xtype:"textarea",hideLabel:true,name:"plugincode",width:"95%",height:400,value:"<?php\n\n?>"}]},{title:_("plugin_properties"),contentEl:"tab_configuration"},{title:_("system_events"),items:[{html:"<h2>"+_("system_events")+"</h2>",border:false},{html:"<p>"+_("plugin_event_msg")+"</p>",border:false},{xtype:"grid-plugin-event",id:"grid-plugin-event",preventRender:true,plugin:A.plugin}]}]},listeners:{setup:{fn:this.setup,scope:this}}});MODx.panel.Plugin.superclass.constructor.call(this,A)};Ext.extend(MODx.panel.Plugin,MODx.FormPanel,{setup:function(){if(this.config.plugin==""||this.config.plugin==0){return }Ext.Ajax.request({url:this.config.url,params:{action:"get",id:this.config.plugin},scope:this,success:function(A){A=Ext.decode(A.responseText);if(A.success){if(A.object.category=="0"){A.object.category=null}A.object.plugincode="<?php\n"+A.object.plugincode+"\n?>";this.getForm().setValues(A.object);Ext.getCmp("plugin-name").getEl().update("<h2>"+_("plugin")+": "+A.object.name+"</h2>")}else{MODx.form.Handler.errorJSON(A)}}})}});Ext.reg("panel-plugin",MODx.panel.Plugin);