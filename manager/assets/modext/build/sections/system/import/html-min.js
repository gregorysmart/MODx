Ext.onReady(function(){MODx.load({xtype:"page-import-html"})});MODx.page.ImportHTML=function(A){A=A||{};Ext.applyIf(A,{form:"import_site",fields:{import_element:{xtype:"textfield",id:"import_element",width:200,applyTo:"import_element",value:"body"},import_context:{xtype:"hidden",id:"import_context",applyTo:"import_context",value:"web"},import_parent:{xtype:"hidden",id:"import_parent",applyTo:"import_parent",value:"0"}},buttons:[{process:"import",text:_("import_site"),method:"remote",onComplete:function(C,D,B){Ext.get("import_results").update(B.message)}},{process:"cancel",text:_("cancel"),params:{a:MODx.action.welcome}}],components:[{xtype:"tree-document-simple",title:_("documents"),url:MODx.config.connectors_url+"resource/document.php",el:"modx_doctree",id:"ih_doctree",tb_id:"modx_doctree_tb",enableDrop:false,rootVisible:false}]});MODx.page.ImportHTML.superclass.constructor.call(this,A);this.setup()};Ext.extend(MODx.page.ImportHTML,MODx.Component,{setup:function(){Ext.Ajax.timeout=0;var A=Ext.getCmp("ih_doctree");A.getSelectionModel().on("selectionchange",this.handleClick,A)},handleClick:function(){var C=0;var A="web";var B=this.getSelectionModel().getSelectedNode();if(B){var D=B.attributes.id.split("_");if(D){A=D[0];C=D[1]}}Ext.getCmp("import_parent").setValue(C);Ext.getCmp("import_context").setValue(A)}});Ext.reg("page-import-html",MODx.page.ImportHTML);