MODx.page.EditFile=function(A){A=A||{};Ext.applyIf(A,{components:[{xtype:"panel-file-edit",renderTo:"panel-file-edit",file:A.file}]});MODx.page.EditFile.superclass.constructor.call(this,A)};Ext.extend(MODx.page.EditFile,MODx.Component);Ext.reg("page-file-edit",MODx.page.EditFile);MODx.panel.EditFile=function(A){A=A||{};Ext.applyIf(A,{title:_("file_edit"),url:MODx.config.connectors_url+"browser/file.php",baseParams:{action:"update",file:A.file},width:"90%",autoHeight:true,collapsible:true,buttonAlign:"center",style:"margin: 1em;",bodyStyle:"padding: 1em;",items:[{xtype:"textfield",fieldLabel:_("name"),name:"name",id:"file_name",width:300},{xtype:"statictextfield",fieldLabel:_("file_size"),name:"size"},{xtype:"statictextfield",fieldLabel:_("file_last_accessed"),name:"last_accessed",width:200},{xtype:"statictextfield",fieldLabel:_("file_last_modified"),name:"last_modified",width:200},{xtype:"textarea",fieldLabel:_("content"),name:"content",grow:true,width:"95%"}],buttons:[{text:_("save"),scope:this,handler:this.submit}]});MODx.panel.EditFile.superclass.constructor.call(this,A);this.config=A;this.setup()};Ext.extend(MODx.panel.EditFile,Ext.FormPanel,{setup:function(){Ext.Ajax.request({url:this.config.url,params:{action:"get",file:this.config.file},scope:this,success:function(A){A=Ext.decode(A.responseText);if(A.success){this.getForm().setValues(A.object)}else{MODx.form.Handler.errorJSON(A)}}})},submit:function(){if(this.getForm().isValid()){this.getForm().submit({waitMsg:_("processing"),reset:false,scope:this,failure:function(B,A){MODx.form.Handler.errorExt(A.result)},success:function(B,A){this.config.file=A.result.object.file;this.getForm().baseParams.file=this.config.file}})}}});Ext.reg("panel-file-edit",MODx.panel.EditFile);