MODx.page.UpdateResource=function(A){A=A||{};Ext.applyIf(A,{url:MODx.config.connectors_url+"resource/document.php",which_editor:"none",formpanel:"panel-resource",actions:{"new":MODx.action["resource/create"],edit:MODx.action["resource/update"],preview:MODx.action["resource/preview"],cancel:MODx.action.welcome},loadStay:true,components:[{xtype:"panel-resource",renderTo:"panel-resource",resource:A.id,class_key:A.class_key,publish_document:A.publish_document,edit_doc_metatags:A.edit_doc_metatags,access_permissions:A.access_permissions,template:A.template},{xtype:"grid-resource-security",renderTo:"grid-resource-security",id:"grid-resource-security",resource:A.id}],tabs:[{contentEl:"tab_content",title:_("document_content")}],buttons:[{process:"update",javascript:A.which_editor!="none"?"cleanupRTE('"+A.which_editor+"');":";",text:_("save"),method:"remote",listeners:{click:{fn:function(B,D){var C=Ext.getCmp("grid-resource-security");Ext.apply(this.ab.config.params,{resource_groups:C.encodeModified()})},scope:this},success:function(E,C,D){Ext.getCmp("grid-resource-security").getStore().commitChanges();var B=parent.Ext.getCmp("modx_document_tree");B.refreshNode(A.ctx+"_"+A.id)}},keys:[{key:"s",alt:true,ctrl:true}]},"-",{process:"duplicate",text:_("duplicate"),confirm:_("confirm_duplicate_document"),method:"remote"},"-",{process:"preview",text:_("preview"),handler:this.preview.createDelegate(this,[A.id]),scope:this},{process:"cancel",text:_("cancel"),params:{a:MODx.action.welcome}}]});MODx.page.UpdateResource.superclass.constructor.call(this,A)};Ext.extend(MODx.page.UpdateResource,MODx.Component,{preview:function(A){window.open(MODx.config.base_url+"index.php?id="+A);return false}});Ext.reg("page-resource-update",MODx.page.UpdateResource);