MODx.panel.PackageBuilder=function(A){A=A||{};Ext.applyIf(A,{title:_("package_builder"),id:"panel-package-builder",layout:"card",firstPanel:"pb-start",lastPanel:"pb-build",txtFinish:_("build"),items:[{xtype:"panel-pb-start"},{xtype:"panel-pb-info"},{xtype:"panel-pb-autoselects"},{xtype:"panel-pb-selvehicle"},{xtype:"panel-pb-build"},{xtype:"panel-pb-xml"}]});MODx.panel.PackageBuilder.superclass.constructor.call(this,A)};Ext.extend(MODx.panel.PackageBuilder,MODx.panel.Wizard);Ext.reg("panel-package-builder",MODx.panel.PackageBuilder);MODx.panel.PackageStart=function(A){A=A||{};Ext.applyIf(A,{id:"pb-start",url:MODx.config.connectors_url+"workspace/builder/index.php",baseParams:{action:"start"},bodyStyle:"padding: 3em 3em",defaults:{labelSeparator:"",border:false},items:[{html:"<h2>"+_("package_method")+"</h2>"},{html:"<p>"+_("package_method_desc")+"</p>"},{xtype:"radio",name:"method",boxLabel:_("use_wizard"),inputValue:"pb-info",checked:true},{xtype:"radio",name:"method",boxLabel:_("use_xml"),inputValue:"pb-xml"}],listeners:{success:{fn:function(C){var D=C.options;var B=C.form.getValues().method;Ext.callback(D.proceed,D.scope||this,[B])},scope:this}}});MODx.panel.PackageStart.superclass.constructor.call(this,A)};Ext.extend(MODx.panel.PackageStart,MODx.FormPanel);Ext.reg("panel-pb-start",MODx.panel.PackageStart);MODx.panel.PackageXML=function(A){A=A||{};Ext.applyIf(A,{id:"pb-xml",back:"pb-start",url:MODx.config.connectors_url+"workspace/builder/index.php",baseParams:{action:"buildFromXML"},fileUpload:true,bodyStyle:"padding: 3em 3em",defaults:{labelSeparator:"",border:false},items:[{html:"<h2>"+_("package_build_xml")+"</h2>"},{html:"<p>"+_("package_build_xml_desc")+"</p>"},{xtype:"textfield",name:"file",inputType:"file"}],listeners:{success:{fn:function(B){MODx.msg.alert("",B.result.message,function(){var C=B.options;Ext.getCmp("pb-info").getForm().reset();Ext.callback(C.proceed,C.scope||this,["pb-start"])},this)},scope:this}}});MODx.panel.PackageXML.superclass.constructor.call(this,A)};Ext.extend(MODx.panel.PackageXML,MODx.FormPanel);Ext.reg("panel-pb-xml",MODx.panel.PackageXML);MODx.panel.PackageInfo=function(A){A=A||{};Ext.applyIf(A,{id:"pb-info",back:"pb-start",url:MODx.config.connectors_url+"workspace/builder/index.php",baseParams:{action:"create"},bodyStyle:"padding: 3em 3em",defaults:{labelSeparator:"",border:false},items:[{html:"<h2>"+_("package_info")+"</h2>"},{html:"<p>"+_("package_info_desc")+"</p>"},{xtype:"textfield",fieldLabel:_("name"),name:"name",allowBlank:false},{xtype:"textfield",fieldLabel:_("version"),name:"version",allowBlank:false},{xtype:"textfield",fieldLabel:_("release"),name:"release",allowBlank:false},{xtype:"combo-namespace",fieldLabel:_("namespace"),id:"pb-namespace",name:"namespace",allowBlank:true}],listeners:{success:{fn:function(D){var E=D.options;var B=Ext.getCmp("pb-namespace").getValue();var C=B=="core"?false:true;Ext.getCmp("pb-as-cb-ss").setValue(C);Ext.getCmp("pb-as-cb-cs").setValue(C);Ext.getCmp("pb-as-cb-le").setValue(C);Ext.getCmp("pb-as-cb-lf").setValue(C);Ext.getCmp("grid-vehicle").refresh();Ext.callback(E.proceed,E.scope||this,["pb-autoselects"])},scope:this}}});MODx.panel.PackageInfo.superclass.constructor.call(this,A)};Ext.extend(MODx.panel.PackageInfo,MODx.FormPanel);Ext.reg("panel-pb-info",MODx.panel.PackageInfo);MODx.panel.PackageAutoSelects=function(A){A=A||{};Ext.applyIf(A,{id:"pb-autoselects",back:"pb-info",url:MODx.config.connectors_url+"workspace/builder/index.php",baseParams:{action:"autoselects"},bodyStyle:"padding: 3em 3em",defaults:{labelSeparator:"",border:false},items:[{html:"<h2>"+_("package_autoselects")+"</h2>"},{html:"<p>"+_("package_autoselects_desc")+"</p>"},{xtype:"checkboxgroup",fieldLabel:_("classes"),columns:1,defaults:{checked:Ext.getCmp("panel-package-builder").coreSelected?false:true,name:"classes[]"},items:[{boxLabel:_("as_system_settings"),inputValue:"modSystemSetting",id:"pb-as-cb-ss"},{boxLabel:_("as_context_settings"),inputValue:"modContextSetting",id:"pb-as-cb-cs"},{boxLabel:_("as_lexicon_entries"),inputValue:"modLexiconEntry",id:"pb-as-cb-le"},{boxLabel:_("as_lexicon_foci"),inputValue:"modLexiconFocus",id:"pb-as-cb-lf"}]}],listeners:{success:{fn:function(B){var C=B.options;Ext.getCmp("grid-vehicle").refresh();Ext.callback(C.proceed,C.scope||this,["pb-selvehicle"])},scope:this}}});MODx.panel.PackageAutoSelects.superclass.constructor.call(this,A)};Ext.extend(MODx.panel.PackageAutoSelects,MODx.FormPanel);Ext.reg("panel-pb-autoselects",MODx.panel.PackageAutoSelects);MODx.panel.SelectVehicles=function(A){A=A||{};Ext.applyIf(A,{id:"pb-selvehicle",back:"pb-autoselects",url:MODx.config.connectors_url+"workspace/builder/vehicle.php",baseParams:{action:"create"},bodyStyle:"padding: 3em 3em",defaults:{labelSeparator:""},items:[{html:"<h2>"+_("vehicles_add")+"</h2>",border:false},{html:"<p>"+_("vehicles_desc")+"</p>",border:false},{xtype:"grid-vehicle",id:"grid-vehicle",preventRender:true}]});MODx.panel.SelectVehicles.superclass.constructor.call(this,A)};Ext.extend(MODx.panel.SelectVehicles,MODx.FormPanel,{submit:function(A){Ext.callback(A.proceed,A.scope||this,["pb-build"])}});Ext.reg("panel-pb-selvehicle",MODx.panel.SelectVehicles);MODx.panel.BuildPackage=function(A){A=A||{};Ext.applyIf(A,{id:"pb-build",back:"pb-selvehicle",url:MODx.config.connectors_url+"workspace/builder/index.php",baseParams:{action:"build"},bodyStyle:"padding: 3em 3em",defaults:{labelSeparator:"",border:false},items:[{html:"<h2>"+_("package_build")+"</h2>"},{html:"<p>"+_("package_build_desc")+"</p>"}],listeners:{success:{fn:function(B){MODx.msg.alert("",B.result.message,function(){var C=B.options;Ext.getCmp("pb-info").getForm().reset();Ext.callback(C.proceed,C.scope||this,["pb-start"])},this)},scope:this}}});MODx.panel.BuildPackage.superclass.constructor.call(this,A)};Ext.extend(MODx.panel.BuildPackage,MODx.FormPanel);Ext.reg("panel-pb-build",MODx.panel.BuildPackage);