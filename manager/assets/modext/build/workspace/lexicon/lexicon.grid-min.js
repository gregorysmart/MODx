MODx.grid.Lexicon=function(A){A=A||{};Ext.applyIf(A,{title:_("lexicon"),url:MODx.config.connectors_url+"workspace/lexicon/index.php",fields:["id","name","value","namespace","focus","language","editedon","menu"],baseParams:{action:"getList",namespace:"core",focus:"default"},width:"97%",paging:true,autosave:true,columns:[{header:_("name"),dataIndex:"name",width:200,sortable:true},{header:_("value"),dataIndex:"value",width:500,sortable:false,editor:{xtype:"textarea"}},{header:_("last_modified"),dataIndex:"editedon",width:100}],tbar:[{xtype:"combo-namespace",name:"namespace",id:"filter_namespace",value:"core",listeners:{select:{fn:this.changeNamespace,scope:this}}},{xtype:"combo-lexicon-focus",name:"focus",id:"filter_focus",value:"default",listeners:{select:{fn:this.filter.createDelegate(this,["focus"],true),scope:this}}},{xtype:"combo-language",name:"language",id:"filter_language",value:"en",listeners:{select:{fn:this.filter.createDelegate(this,["language"],true),scope:this}}},{text:_("create_new"),xtype:"button",menu:[{text:_("entry"),handler:this.loadWindow2.createDelegate(this,["window-lexicon-entry-create"],true),scope:this},{text:_("focus"),handler:this.loadWindow2.createDelegate(this,["window-lexicon-focus-create"],true),scope:this},{text:_("namespace"),handler:this.loadWindow2.createDelegate(this,["window-namespace-create"],true),scope:this}]},"->",{xtype:"textfield",name:"name",id:"filter_name",emptyText:_("search")+"...",listeners:{change:{fn:this.filter.createDelegate(this,["name"],true),scope:this},render:{fn:function(B){B.getEl().addKeyListener(Ext.EventObject.ENTER,function(){B.fireEvent("change")},this)}}}},{xtype:"button",id:"filter_clear",text:_("filter_clear"),listeners:{click:{fn:this.clearFilter,scope:this}}}],pagingItems:[{text:_("reload_from_base"),handler:this.reloadFromBase,scope:this},"-",{xtype:"button",text:_("lexicon_import"),handler:function(B,C){this.loadWindow2(B,C,"window-lexicon-import")},scope:this},{xtype:"button",text:_("lexicon_export"),handler:function(B,C){this.loadWindow2(B,C,"window-lexicon-export")},scope:this}]});MODx.grid.Lexicon.superclass.constructor.call(this,A)};Ext.extend(MODx.grid.Lexicon,MODx.grid.Grid,{filter:function(A,D,C,B){if(!B){return false}this.store.baseParams[B]=A.getValue();this.getBottomToolbar().changePage(1);this.refresh()},clearFilter:function(){this.store.baseParams={action:"getList",namespace:"core",focus:"default",language:"en"};this.getBottomToolbar().changePage(1);Ext.getCmp("filter_namespace").setValue("core");Ext.getCmp("filter_focus").setValue("default");Ext.getCmp("filter_language").setValue("en");this.refresh()},changeNamespace:function(A,B,C){var D=Ext.getCmp("filter_focus").store;D.baseParams.namespace=B;D.reload();this.filter(A,null,1,"namespace")},loadWindow2:function(A,B,C){this.menu.record={namespace:Ext.getCmp("filter_namespace").getValue(),focus:Ext.getCmp("filter_focus").getValue(),language:Ext.getCmp("filter_language").getValue()};this.loadWindow(A,B,{xtype:C})},reloadFromBase:function(){Ext.Ajax.timeout=0;Ext.Ajax.request({url:this.config.url,params:{action:"reloadFromBase"},scope:this,success:function(A){A=Ext.decode(A.responseText);if(A.success){this.refresh()}else{MODx.form.Handler.errorJSON(A)}}})}});Ext.reg("grid-lexicon",MODx.grid.Lexicon);MODx.window.CreateLexiconEntry=function(A){A=A||{};var B=A.record;Ext.applyIf(A,{title:_("entry_create"),url:MODx.config.connectors_url+"workspace/lexicon/index.php",action:"create",fields:[{xtype:"textfield",fieldLabel:_("key"),name:"name",width:250,maxLength:100},{xtype:"combo-namespace",fieldLabel:_("namespace"),name:"namespace",value:B.namespace,listeners:{select:{fn:function(C,E,D){cle=Ext.getCmp("cle-focus");cle.store.baseParams.namespace=C.getValue();cle.store.reload();cle.setValue("default")},scope:this}}},{xtype:"combo-lexicon-focus",fieldLabel:_("focus"),name:"focus",id:"cle-focus",value:B.focus},{xtype:"combo-language",fieldLabel:_("language"),name:"language",value:B.language},{xtype:"textarea",fieldLabel:_("value"),name:"value",width:300,grow:true}]});MODx.window.CreateLexiconEntry.superclass.constructor.call(this,A)};Ext.extend(MODx.window.CreateLexiconEntry,MODx.Window);Ext.reg("window-lexicon-entry-create",MODx.window.CreateLexiconEntry);MODx.window.UpdateLexiconEntry=function(A){A=A||{};var B=A.record;Ext.applyIf(A,{title:_("entry_update"),url:MODx.config.connectors_url+"workspace/lexicon/index.php",action:"update",fields:[{xtype:"hidden",name:"id",value:B.id},{xtype:"textfield",fieldLabel:_("key"),name:"name",width:250,maxLength:100,value:B.name},{xtype:"combo-lexicon-focus",fieldLabel:_("focus"),name:"focus",id:"ule-focus",value:B.focus},{xtype:"combo-namespace",fieldLabel:_("namespace"),name:"namespace",value:B.namespace,listeners:{select:{fn:function(C,E,D){cle=Ext.getCmp("ule-focus");cle.store.baseParams.namespace=C.getValue();cle.store.reload();cle.setValue("default")},scope:this}}},{xtype:"combo-language",fieldLabel:_("language"),name:"language",value:B.language},{xtype:"textarea",fieldLabel:_("value"),name:"value",width:300,grow:true,value:B.value}]});MODx.window.UpdateLexiconEntry.superclass.constructor.call(this,A)};Ext.extend(MODx.window.UpdateLexiconEntry,MODx.Window);Ext.reg("window-lexicon-entry-update",MODx.window.UpdateLexiconEntry);MODx.window.CreateLexiconFocus=function(A){A=A||{};var B=A.record;Ext.applyIf(A,{title:_("focus_create"),url:MODx.config.connectors_url+"workspace/lexicon/focus.php",action:"create",fields:[{xtype:"textfield",fieldLabel:_("name"),name:"name",width:250,maxLength:100},{xtype:"combo-namespace",fieldLabel:_("namespace"),name:"namespace",value:B.namespace}]});MODx.window.CreateLexiconFocus.superclass.constructor.call(this,A)};Ext.extend(MODx.window.CreateLexiconFocus,MODx.Window);Ext.reg("window-lexicon-focus-create",MODx.window.CreateLexiconFocus);MODx.window.ImportLexicon=function(A){A=A||{};var B=A.record;Ext.applyIf(A,{title:_("lexicon_import"),url:MODx.config.connectors_url+"workspace/lexicon/index.php",action:"import",fileUpload:true,fields:[{html:_("lexicon_import_desc"),border:false,bodyStyle:"margin: 1em;"},{xtype:"textfield",fieldLabel:_("lexicon"),name:"lexicon",width:250,inputType:"file"},{xtype:"combo-namespace",fieldLabel:_("namespace"),name:"namespace"},{xtype:"textfield",fieldLabel:_("focus"),name:"focus"},{xtype:"combo-language",fieldLabel:_("language"),name:"language"}]});MODx.window.ImportLexicon.superclass.constructor.call(this,A)};Ext.extend(MODx.window.ImportLexicon,MODx.Window);Ext.reg("window-lexicon-import",MODx.window.ImportLexicon);MODx.window.ExportLexicon=function(A){A=A||{};var B=A.record;Ext.applyIf(A,{title:_("lexicon_export"),url:MODx.config.connectors_url+"workspace/lexicon/index.php",action:"export",fileUpload:true,fields:[{html:_("lexicon_export_desc"),border:false,bodyStyle:"margin: 1em;"},{xtype:"combo-namespace",fieldLabel:_("namespace"),name:"namespace",listeners:{select:{fn:function(C,E,D){cle=Ext.getCmp("ex-cmb-focus");cle.store.baseParams.namespace=C.getValue();cle.store.reload();cle.setValue("default")},scope:this}}},{xtype:"combo-lexicon-focus",fieldLabel:_("focus"),name:"focus",id:"ex-cmb-focus"},{xtype:"combo-language",fieldLabel:_("language"),name:"language"}]});MODx.window.ExportLexicon.superclass.constructor.call(this,A)};Ext.extend(MODx.window.ExportLexicon,MODx.Window);Ext.reg("window-lexicon-export",MODx.window.ExportLexicon);