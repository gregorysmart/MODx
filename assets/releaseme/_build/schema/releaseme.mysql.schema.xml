<?xml version="1.0" encoding="UTF-8"?>
<model package="releaseme" baseClass="xPDOObject" platform="mysql" defaultEngine="MyISAM">
	<object class="rmRepository" table="rm_repositories" extends="xPDOSimpleObject">
        <field key="name" dbtype="varchar" precision="100" phptype="string" null="false" default="" index="index" />
        <field key="createdon" dbtype="datetime" phptype="datetime" null="false" />
        <composite alias="Packages" class="rmPackage" local="id" foreign="repository" cardinality="many" owner="local" />
	</object>
	
	<object class="rmPackage" table="rm_packages" extends="xPDOSimpleObject">
		<field key="repository" dbtype="integer" precision="10" attributes="unsigned" phptype="integer" null="false" default="0" index="index" />
        <field key="parent" dbtype="integer" precision="10" attributes="unsigned" phptype="integer" null="false" default="0" index="fk" />
        <field key="name" dbtype="varchar" precision="100" phptype="string" null="false" default="" index="index" />
        <field key="description" dbtype="mediumtext" phptype="string" null="false" />
        <field key="createdon" dbtype="datetime" phptype="datetime" null="false" />
        <field key="createdby" dbtype="integer" precision="10" attributes="unsigned" phptype="integer" null="false" default="0" />
        <field key="use_smf" dbtype="tinyint" precision="1" attributes="unsigned" phptype="integer" null="false" default="0" />
        <field key="use_jira" dbtype="tinyint" precision="1" attributes="unsigned" phptype="integer" null="false" default="0" />
        <aggregate alias="Repository" class="rmRepository" local="repository" foreign="id" cardinality="one" owner="foreign" />
        <aggregate alias="Parent" class="rmPackage" local="parent" foreign="id" cardinality="one" owner="foreign" />
        <composite alias="Children" class="rmPackage" local="id" foreign="parent" cardinality="many" owner="local" />
        <composite alias="Versions" class="rmPackageVersion" local="id" foreign="package" cardinality="many" owner="local" />
	</object>
	
	<object class="rmPackageVersion" table="rm_package_versions" extends="xPDOSimpleObject">
		<field key="package" dbtype="integer" precision="10" phptype="integer" null="false" index="fk" />
		<field key="display_name" dbtype="varchar" precision="255" phptype="string" null="false" />
		<field key="version" dbtype="varchar" precision="40" phptype="string" null="false" />
		<field key="release" dbtype="varchar" precision="40" phptype="string" null="false" />
		<field key="author" dbtype="integer" precision="10" attributes="unsigned" phptype="integer" null="false" default="0" />
		<field key="description" dbtype="mediumtext" phptype="string" null="false" />
		<field key="createdon" dbtype="datetime" phptype="datetime" null="false" />
		<field key="createdby" dbtype="integer" precision="10" attributes="unsigned" phptype="integer" null="false" default="0" />
		<field key="editedon" dbtype="timestamp" phptype="timestamp" attributes="ON UPDATE CURRENT_TIMESTAMP" />
		<field key="editedby" dbtype="integer" precision="10" attributes="unsigned" phptype="integer" null="false" default="0" />
		<field key="releasedon" dbtype="timestamp" phptype="timestamp" null="true" />
		<field key="website_url" dbtype="tinytext" phptype="string" null="false" />
		<field key="downloads" dbtype="integer" precision="10" attributes="unsigned" phptype="integer" null="false" default="0" />
		<field key="audited" dbtype="tinyint" precision="1" attributes="unsigned" phptype="integer" null="false" default="0" />
		<field key="featured" dbtype="tinyint" precision="1" attributes="unsigned" phptype="integer" null="false" default="0" />
		<field key="deprecated" dbtype="tinyint" precision="1" attributes="unsigned" phptype="integer" null="false" default="0" />
		<field key="license" dbtype="varchar" phptype="string" null="false" default="GPLv3" />
		<field key="smf_url" dbtype="mediumtext" phptype="string" nnull="false" />
		<aggregate alias="Package" class="rmPackage" local="package" foreign="id" cardinality="one" owner="foreign" />
		<aggregate alias="Author" class="modUser" local="author" foreign="id" cardinality="one" owner="foreign" />
		<aggregate alias="Creator" class="modUser" local="createdby" foreign="id" cardinality="one" owner="foreign" />
		<aggregate alias="Editor" class="modUser" local="editedby" foreign="id" cardinality="one" owner="foreign" />
		<composite alias="Supports" class="rmPackageSupports" local="id" foreign="package_version" cardinality="many" owner="local" />
	</object>
	
	<object class="rmPackageSupports" table="rm_package_supports" extends="xPDOObject">
		<field key="package_version" dbtype="integer" precision="10" phptype="integer" null="false" index="pk" />
		<field key="version" dbtype="varchar" precision="255" phptype="string" null="false" />
		<aggregate alias="PackageVersion" class="rmPackageVersion" local="package_version" foreign="id" cardinality="one" owner="foreign" />		
	</object>		
</model>
    